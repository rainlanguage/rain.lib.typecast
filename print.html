<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title></title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="book.css">

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item "><a href="index.html">Home</a></li><li class="chapter-item affix "><li class="part-title">src</li><li class="chapter-item "><a href="src/LibCast.sol/library.LibCast.html">LibCast</a></li><li class="chapter-item "><a href="src/LibConvert.sol/library.LibConvert.html">LibConvert</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/rainprotocol/rain.lib.typecast" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="foundrytemplate"><a class="header" href="#foundrytemplate">foundry.template</a></h1>
<p>Docs at https://rainprotocol.github.io/foundry.template</p>
<h2 id="use-as-template"><a class="header" href="#use-as-template">Use as template</a></h2>
<pre><code>forge init -t rainprotocol/foundry.template &lt;projectname&gt;
cd &lt;projectname&gt;
forge install foundry-rs/forge-std
</code></pre>
<p>Then update the readme, set the docs url and configure github pages on github repo settings.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libcast"><a class="header" href="#libcast">LibCast</a></h1>
<p><a href="https://github.com/rainprotocol/rain.lib.typecast/blob/4ad548bf9969b7f24c5f72ae12b7e8ae1e487266/src/LibCast.sol">Git Source</a></p>
<p>Additional type casting logic that the Solidity compiler doesn't
give us by default. A type cast (vs. conversion) is considered one where the
structure is unchanged by the cast. The cast does NOT (can't) check that the
input is a valid output, for example any integer MAY be cast to a function
pointer but almost all integers are NOT valid function pointers. It is the
calling context that MUST ensure the validity of the data, the cast will
merely retype the data in place, generally without additional checks.
As most structures in solidity have the same memory structure as a <code>uint256</code>
or fixed/dynamic array of <code>uint256</code> there are many conversions that can be
done with near zero or minimal overhead.</p>
<h2 id="functions"><a class="header" href="#functions">Functions</a></h2>
<h3 id="asaddressesarray"><a class="header" href="#asaddressesarray">asAddressesArray</a></h3>
<p>Retype an array of <code>uint256[]</code> to <code>address[]</code>.</p>
<pre><code class="language-solidity">function asAddressesArray(uint256[] memory us_) internal pure returns (address[] memory addresses_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>us_</code></td><td><code>uint256[]</code></td><td>The array of integers to cast to addresses.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>addresses_</code></td><td><code>address[]</code></td><td>The array of addresses cast from each integer.</td></tr>
</tbody></table>
</div>
<h3 id="asuint256array"><a class="header" href="#asuint256array">asUint256Array</a></h3>
<pre><code class="language-solidity">function asUint256Array(address[] memory addresses_) internal pure returns (uint256[] memory us_);
</code></pre>
<h3 id="asbytes32array"><a class="header" href="#asbytes32array">asBytes32Array</a></h3>
<p>Retype an array of <code>uint256[]</code> to <code>bytes32[]</code>.</p>
<pre><code class="language-solidity">function asBytes32Array(uint256[] memory us_) internal pure returns (bytes32[] memory b32s_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>us_</code></td><td><code>uint256[]</code></td><td>The array of integers to cast to 32 byte words.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>b32s_</code></td><td><code>bytes32[]</code></td><td>The array of 32 byte words.</td></tr>
</tbody></table>
</div>
<h3 id="asuint256array-1"><a class="header" href="#asuint256array-1">asUint256Array</a></h3>
<pre><code class="language-solidity">function asUint256Array(bytes32[] memory b32s_) internal pure returns (uint256[] memory us_);
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="libconvert"><a class="header" href="#libconvert">LibConvert</a></h1>
<p><a href="https://github.com/rainprotocol/rain.lib.typecast/blob/4ad548bf9969b7f24c5f72ae12b7e8ae1e487266/src/LibConvert.sol">Git Source</a></p>
<p>Type conversions that require additional structural changes to
complete safely. These are NOT mere type casts and involve additional
reads and writes to complete, such as recalculating the length of an array.
The convention &quot;toX&quot; is adopted from Rust to imply the additional costs and
consumption of the source to produce the target.</p>
<h2 id="functions-1"><a class="header" href="#functions-1">Functions</a></h2>
<h3 id="unsafetobytes"><a class="header" href="#unsafetobytes">unsafeToBytes</a></h3>
<p>Convert an array of integers to <code>bytes</code> data. This requires modifying
the length in situ as the integer array length is measured in 32 byte
increments while the length of <code>bytes</code> is the literal number of bytes.
It is unsafe for the caller to use <code>us_</code> after it has been converted to
bytes because there is now two pointers to the same mutable data
structure AND the length prefix for the <code>uint256[]</code> version is corrupt.</p>
<pre><code class="language-solidity">function unsafeToBytes(uint256[] memory us_) internal pure returns (bytes memory bytes_);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>us_</code></td><td><code>uint256[]</code></td><td>The integer array to convert to <code>bytes</code>.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>bytes_</code></td><td><code>bytes</code></td><td>The integer array converted to <code>bytes</code> data.</td></tr>
</tbody></table>
</div>
<h3 id="unsafeto16bitbytes"><a class="header" href="#unsafeto16bitbytes">unsafeTo16BitBytes</a></h3>
<p>Truncate <code>uint256[]</code> values down to <code>uint16[]</code> then pack this to <code>bytes</code>
without padding or length prefix. Unsafe because the starting <code>uint256</code>
values are not checked for overflow due to the truncation. The caller
MUST ensure that all values fit in <code>type(uint16).max</code> or that silent
overflow is safe.</p>
<pre><code class="language-solidity">function unsafeTo16BitBytes(uint256[] memory us_) internal pure returns (bytes memory);
</code></pre>
<p><strong>Parameters</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>us_</code></td><td><code>uint256[]</code></td><td>The <code>uint256[]</code> to truncate and concatenate to 16 bit <code>bytes</code>.</td></tr>
</tbody></table>
</div>
<p><strong>Returns</strong></p>
<div class="table-wrapper"><table><thead><tr><th>Name</th><th>Type</th><th>Description</th></tr></thead><tbody>
<tr><td><code>&lt;none&gt;</code></td><td><code>bytes</code></td><td>The concatenated 2-byte chunks.</td></tr>
</tbody></table>
</div>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->
        <script src="solidity.min.js"></script>

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
